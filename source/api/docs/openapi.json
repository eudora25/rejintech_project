{
  "openapi": "3.0.3",
  "info": {
    "title": "Rejintech API",
    "description": "Rejintech 프로젝트 REST API 문서",
    "version": "1.0.0",
    "contact": {
      "name": "Rejintech Support",
      "email": "admin@rejintech.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost",
      "description": "개발 서버"
    },
    {
      "url": "https://api.rejintech.com",
      "description": "프로덕션 서버"
    }
  ],
  "paths": {
    "/api/test": {
      "get": {
        "tags": ["테스트"],
        "summary": "API 연결 테스트",
        "description": "API 서버 연결 상태를 확인합니다",
        "responses": {
          "200": {
            "description": "성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "success"
                    },
                    "message": {
                      "type": "string",
                      "example": "API 서버가 정상적으로 작동중입니다"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-01-01T12:00:00Z"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "tags": ["인증"],
        "summary": "사용자 로그인",
        "description": "사용자명과 패스워드로 로그인하여 JWT 토큰을 발급받습니다",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["username", "password"],
                "properties": {
                  "username": {
                    "type": "string",
                    "example": "admin",
                    "description": "사용자명"
                  },
                  "password": {
                    "type": "string",
                    "example": "password",
                    "description": "패스워드"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "로그인 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "token": {
                      "type": "string",
                      "example": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "example": 1
                        },
                        "username": {
                          "type": "string",
                          "example": "admin"
                        },
                        "email": {
                          "type": "string",
                          "example": "admin@example.com"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "로그인 성공"
                    },
                    "expires_in": {
                      "type": "integer",
                      "example": 3600
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "사용자명과 패스워드를 입력해주세요."
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "잘못된 사용자명 또는 패스워드입니다."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/verify": {
      "post": {
        "tags": ["인증"],
        "summary": "토큰 검증",
        "description": "JWT 토큰의 유효성을 검증합니다",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "토큰 유효",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "user_id": {
                          "type": "integer",
                          "example": 1
                        },
                        "username": {
                          "type": "string",
                          "example": "admin"
                        },
                        "email": {
                          "type": "string",
                          "example": "admin@example.com"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "토큰이 유효합니다."
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "토큰 무효",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "유효하지 않은 토큰입니다."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/profile": {
      "get": {
        "tags": ["인증"],
        "summary": "사용자 프로필 조회",
        "description": "JWT 토큰을 사용하여 현재 로그인한 사용자의 프로필을 조회합니다",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "프로필 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "example": 1
                        },
                        "username": {
                          "type": "string",
                          "example": "admin"
                        },
                        "email": {
                          "type": "string",
                          "example": "admin@example.com"
                        },
                        "created_at": {
                          "type": "string",
                          "example": "2025-06-22 05:59:26"
                        },
                        "updated_at": {
                          "type": "string",
                          "example": "2025-06-22 05:59:26"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "유효하지 않은 토큰입니다."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/check-login": {
      "post": {
        "tags": ["인증"],
        "summary": "로그인 상태 확인",
        "description": "현재 토큰이 데이터베이스에 저장된 유효한 토큰인지 확인합니다",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "토큰 유효 (로그인 상태)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "is_logged_in": {
                      "type": "boolean",
                      "example": true
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "example": 1
                        },
                        "username": {
                          "type": "string",
                          "example": "admin"
                        },
                        "email": {
                          "type": "string",
                          "example": "admin@example.com"
                        }
                      }
                    },
                    "token_info": {
                      "type": "object",
                      "properties": {
                        "issued_at": {
                          "type": "string",
                          "example": "2025-06-23 07:00:00"
                        },
                        "expires_at": {
                          "type": "string",
                          "example": "2025-06-23 08:00:00"
                        },
                        "last_used_at": {
                          "type": "string",
                          "example": "2025-06-23 07:30:00"
                        },
                        "ip_address": {
                          "type": "string",
                          "example": "192.168.1.100"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "로그인 상태 확인됨"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "토큰 무효 (로그아웃 상태)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "is_logged_in": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "유효하지 않은 토큰입니다."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "tags": ["인증"],
        "summary": "로그아웃",
        "description": "현재 토큰을 무효화하여 로그아웃 처리합니다",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "logout_all": {
                    "type": "boolean",
                    "example": false,
                    "description": "모든 디바이스에서 로그아웃할지 여부"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "로그아웃 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "로그아웃 완료"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "유효하지 않은 토큰입니다."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/users": {
      "get": {
        "tags": ["사용자"],
        "summary": "사용자 목록 조회",
        "description": "등록된 사용자 목록을 페이지네이션으로 조회합니다",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "페이지 번호",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "minimum": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "페이지당 항목 수",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "minimum": 1,
              "maximum": 100
            }
          }
        ],
        "responses": {
          "200": {
            "description": "성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "success"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/User"
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer",
                          "example": 1
                        },
                        "limit": {
                          "type": "integer",
                          "example": 10
                        },
                        "total": {
                          "type": "integer",
                          "example": 25
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "서버 오류",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["사용자"],
        "summary": "새 사용자 생성",
        "description": "새로운 사용자를 생성합니다",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["name", "email"],
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "홍길동",
                    "description": "사용자 이름"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "hong@example.com",
                    "description": "이메일 주소"
                  },
                  "phone": {
                    "type": "string",
                    "example": "010-1234-5678",
                    "description": "전화번호"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "생성 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "success"
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    },
                    "message": {
                      "type": "string",
                      "example": "사용자가 성공적으로 생성되었습니다"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "error"
                    },
                    "message": {
                      "type": "string",
                      "example": "유효성 검사 실패"
                    },
                    "errors": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "example": ["이름은 필수입니다", "유효한 이메일을 입력하세요"]
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/users/{id}": {
      "get": {
        "tags": ["사용자"],
        "summary": "사용자 상세 조회",
        "description": "특정 사용자의 상세 정보를 조회합니다",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "사용자 ID",
            "schema": {
              "type": "integer",
              "example": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "success"
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "사용자를 찾을 수 없음",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/procurement/delivery-requests": {
      "post": {
        "tags": ["조달청"],
        "summary": "조달청 데이터 전체 리스트 조회",
        "description": "조달청 납품요구 데이터를 페이징, 필터링하여 조회합니다",
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProcurementRequest"
              },
              "examples": {
                "기본 요청": {
                  "value": {
                    "filterModel": {
                      "type": ["CSO"]
                    },
                    "sortModel": {
                      "bizName": "desc"
                    },
                    "page": 1,
                    "size": 50
                  }
                },
                "복합 필터": {
                  "value": {
                    "filterModel": {
                      "type": ["CSO", "MAS"],
                      "dminsttNm": "서울특별시",
                      "dateFrom": "2024-01-01",
                      "dateTo": "2024-12-31"
                    },
                    "sortModel": {
                      "dlvrReqRcptDate": "desc",
                      "incdecAmt": "desc"
                    },
                    "page": 1,
                    "size": 100
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProcurementListResponse"
                }
              }
            }
          },
          "401": {
            "description": "인증 실패",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/procurement/statistics/institutions": {
      "get": {
        "tags": ["조달청"],
        "summary": "수요기관별 통계 조회",
        "description": "수요기관별 납품요구 통계를 조회합니다",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "통계 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatisticsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/procurement/statistics/companies": {
      "get": {
        "tags": ["조달청"],
        "summary": "업체별 통계 조회",
        "description": "업체별 납품요구 통계를 조회합니다",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "통계 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatisticsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/procurement/statistics/products": {
      "get": {
        "tags": ["조달청"],
        "summary": "품목별 통계 조회",
        "description": "품목별 납품요구 통계를 조회합니다",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "통계 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatisticsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/procurement/filter-options": {
      "get": {
        "tags": ["조달청"],
        "summary": "필터 옵션 조회",
        "description": "필터링에 사용할 수 있는 옵션들을 조회합니다",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "필터 옵션 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FilterOptionsResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT Bearer 토큰을 사용한 인증"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 1,
            "description": "사용자 고유 ID"
          },
          "name": {
            "type": "string",
            "example": "홍길동",
            "description": "사용자 이름"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "hong@example.com",
            "description": "이메일 주소"
          },
          "phone": {
            "type": "string",
            "example": "010-1234-5678",
            "description": "전화번호"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-01T12:00:00Z",
            "description": "생성일시"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-01T12:00:00Z",
            "description": "수정일시"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "error"
          },
          "message": {
            "type": "string",
            "example": "오류가 발생했습니다"
          },
          "code": {
            "type": "integer",
            "example": 500
          }
        }
      },
      "ProcurementRequest": {
        "type": "object",
        "properties": {
          "filterModel": {
            "type": "object",
            "description": "필터 조건",
            "properties": {
              "type": {
                "type": "array",
                "items": {"type": "string", "enum": ["CSO", "MAS"]},
                "description": "상품 유형 (CSO: 우수제품, MAS: 일반제품)"
              },
              "exclcProdctYn": {"type": "string", "enum": ["Y", "N"], "description": "우수제품 여부"},
              "dlvrReqRcptDate": {"type": "string", "format": "date", "description": "납품요구접수일자"},
              "dminsttNm": {"type": "string", "description": "수요기관명"},
              "dminsttRgnNm": {"type": "string", "description": "수요기관지역명"},
              "corpNm": {"type": "string", "description": "업체명"},
              "dlvrReqNm": {"type": "string", "description": "납품요구건명"},
              "prdctClsfcNoNm": {"type": "string", "description": "품명"},
              "dtilPrdctClsfcNoNm": {"type": "string", "description": "세부품명"},
              "prdctIdntNo": {"type": "string", "description": "물품식별번호"},
              "prdctIdntNoNm": {"type": "string", "description": "물품규격명"},
              "dminsttCd": {"type": "string", "description": "수요기관코드"},
              "dateFrom": {"type": "string", "format": "date", "description": "시작 날짜"},
              "dateTo": {"type": "string", "format": "date", "description": "종료 날짜"},
              "amountFrom": {"type": "number", "description": "최소 금액"},
              "amountTo": {"type": "number", "description": "최대 금액"}
            }
          },
          "sortModel": {
            "type": "object",
            "description": "정렬 조건",
            "additionalProperties": {
              "type": "string",
              "enum": ["asc", "desc"]
            },
            "example": {
              "bizName": "desc",
              "dlvrReqRcptDate": "desc"
            }
          },
          "page": {
            "type": "integer",
            "minimum": 1,
            "default": 1,
            "description": "페이지 번호"
          },
          "size": {
            "type": "integer",
            "minimum": 1,
            "maximum": 100,
            "default": 50,
            "description": "페이지 크기"
          }
        },
        "required": ["page", "size"]
      },
      "ProcurementItem": {
        "type": "object",
        "properties": {
          "dlvrReqNo": {"type": "string", "description": "납품요구번호"},
          "dlvrReqRcptDate": {"type": "string", "format": "date", "description": "납품요구접수일자"},
          "dminsttNm": {"type": "string", "description": "수요기관명"},
          "dminsttRgnNm": {"type": "string", "description": "수요기관지역명"},
          "corpNm": {"type": "string", "description": "업체명"},
          "dlvrReqNm": {"type": "string", "description": "납품요구건명"},
          "prdctClsfcNoNm": {"type": "string", "description": "품명"},
          "dtilPrdctClsfcNoNm": {"type": "string", "description": "세부품명"},
          "prdctIdntNo": {"type": "string", "description": "물품식별번호"},
          "prdctIdntNoNm": {"type": "string", "description": "물품규격명"},
          "incdecQty": {"type": "number", "description": "증감수량"},
          "prdctUprc": {"type": "number", "description": "물품단가"},
          "incdecAmt": {"type": "number", "description": "증감금액"},
          "dminsttCd": {"type": "string", "description": "수요기관코드"},
          "exclcProdctYn": {"type": "string", "enum": ["Y", "N"], "description": "우수제품여부"},
          "type": {"type": "string", "enum": ["CSO", "MAS"], "description": "상품 유형"},
          "bizName": {"type": "string", "description": "업체명 (정렬용)"}
        }
      },
      "ProcurementListResponse": {
        "type": "object",
        "properties": {
          "success": {"type": "boolean", "example": true},
          "message": {"type": "string", "example": "조달청 데이터 조회 성공"},
          "data": {
            "type": "object",
            "properties": {
              "page": {"type": "integer", "example": 1},
              "size": {"type": "integer", "example": 50},
              "total": {"type": "integer", "example": 992},
              "jodalTotalAmount": {"type": "number", "example": 456789123.45},
              "masTotalAmount": {"type": "number", "example": 5780440150.55},
              "totalAmount": {"type": "number", "example": 6237229274.0},
              "filterPrdctClsfcNoNm": {
                "type": "array",
                "items": {"type": "string"}
              },
              "filterDminsttNm": {
                "type": "array",
                "items": {"type": "string"}
              },
              "filterCorpNm": {
                "type": "array",
                "items": {"type": "string"}
              },
              "data": {
                "type": "array",
                "items": {"$ref": "#/components/schemas/ProcurementItem"}
              }
            }
          },
          "timestamp": {"type": "string", "format": "date-time"}
        }
      },
      "StatisticsResponse": {
        "type": "object",
        "properties": {
          "success": {"type": "boolean", "example": true},
          "message": {"type": "string", "example": "통계 조회 성공"},
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {"type": "string"},
                "delivery_count": {"type": "integer"},
                "total_amount": {"type": "number"},
                "avg_amount": {"type": "number"}
              }
            }
          },
          "timestamp": {"type": "string", "format": "date-time"}
        }
      },
      "FilterOptionsResponse": {
        "type": "object",
        "properties": {
          "success": {"type": "boolean", "example": true},
          "message": {"type": "string", "example": "필터 옵션 조회 성공"},
          "data": {
            "type": "object",
            "properties": {
              "filterPrdctClsfcNoNm": {
                "type": "array",
                "items": {"type": "string"}
              },
              "filterDminsttNm": {
                "type": "array",
                "items": {"type": "string"}
              },
              "filterCorpNm": {
                "type": "array",
                "items": {"type": "string"}
              }
            }
          },
          "timestamp": {"type": "string", "format": "date-time"}
        }
      }
    }
  },
  "tags": [
    {
      "name": "테스트",
      "description": "API 테스트 관련 엔드포인트"
    },
    {
      "name": "인증",
      "description": "JWT 기반 사용자 인증 관련 엔드포인트"
    },
    {
      "name": "사용자",
      "description": "사용자 관리 관련 엔드포인트"
    },
    {
      "name": "조달청",
      "description": "조달청 납품요구 데이터 조회 및 통계 관련 엔드포인트"
    }
  ]
} 