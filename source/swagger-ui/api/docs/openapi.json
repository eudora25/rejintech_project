{
  "openapi": "3.0.3",
  "info": {
    "title": "Rejintech API",
    "description": "Rejintech 프로젝트 REST API 문서\n\n## API 버전 관리\n- 현재 버전: v1.0.0\n- URL 경로에 버전을 포함하지 않는 경우 최신 버전이 사용됩니다.\n- 하위 호환성이 깨지는 변경사항이 있을 경우 메이저 버전이 변경됩니다.\n- API 변경 이력은 [CHANGELOG.md](http://52.78.104.83/docs/CHANGELOG.md)에서 확인할 수 있습니다.\n\n## 인증\n- 모든 보호된 API는 JWT 토큰이 필요합니다.\n- 토큰은 로그인 API를 통해 발급받을 수 있습니다.\n- 토큰의 유효기간은 24시간입니다.\n\n## 에러 처리\n- 모든 API는 일관된 에러 응답 형식을 사용합니다.\n- HTTP 상태 코드와 함께 상세한 에러 메시지가 제공됩니다.\n\n## 페이지네이션\n- 목록 조회 API는 페이지네이션을 지원합니다.\n- page와 size 파라미터를 통해 페이지 크기와 번호를 지정할 수 있습니다.\n- 기본값: page=1, size=50",
    "version": "1.0.0",
    "contact": {
      "name": "Rejintech Support",
      "email": "admin@rejintech.com"
    }
  },
  "servers": [
    {
      "url": "http://52.78.104.83",
      "description": "개발 서버"
    },
    {
      "url": "http://localhost",
      "description": "로컬 개발 서버"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT 토큰을 입력하세요. 토큰은 로그인 API를 통해 발급받을 수 있습니다."
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 1,
            "description": "사용자 고유 ID"
          },
          "name": {
            "type": "string",
            "example": "홍길동",
            "description": "사용자 이름"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "hong@example.com",
            "description": "이메일 주소"
          },
          "phone": {
            "type": "string",
            "example": "010-1234-5678",
            "description": "전화번호"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-01T12:00:00Z",
            "description": "생성일시"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-01T12:00:00Z",
            "description": "수정일시"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "example": "error"
          },
          "message": {
            "type": "string",
            "example": "오류가 발생했습니다"
          },
          "code": {
            "type": "integer",
            "example": 500
          }
        }
      },
      "ProcurementRequest": {
        "type": "object",
        "properties": {
          "filterModel": {
            "type": "object",
            "description": "필터 조건",
            "properties": {
              "type": {
                "type": "array",
                "items": {"type": "string", "enum": ["CSO", "MAS"]},
                "description": "상품 유형 (CSO: 우수제품, MAS: 일반제품)"
              },
              "exclcProdctYn": {"type": "string", "enum": ["Y", "N"], "description": "우수제품 여부"},
              "dlvrReqRcptDate": {"type": "string", "format": "date", "description": "납품요구접수일자"},
              "dminsttNm": {"type": "string", "description": "수요기관명"},
              "dminsttRgnNm": {"type": "string", "description": "수요기관지역명"},
              "corpNm": {"type": "string", "description": "업체명"},
              "dlvrReqNm": {"type": "string", "description": "납품요구건명"},
              "prdctClsfcNoNm": {"type": "string", "description": "품명"},
              "dtilPrdctClsfcNoNm": {"type": "string", "description": "세부품명"},
              "prdctIdntNo": {"type": "string", "description": "물품식별번호"},
              "prdctIdntNoNm": {"type": "string", "description": "물품규격명"},
              "dminsttCd": {"type": "string", "description": "수요기관코드"},
              "dateFrom": {"type": "string", "format": "date", "description": "시작 날짜"},
              "dateTo": {"type": "string", "format": "date", "description": "종료 날짜"},
              "amountFrom": {"type": "number", "description": "최소 금액"},
              "amountTo": {"type": "number", "description": "최대 금액"}
            }
          },
          "sortModel": {
            "type": "object",
            "description": "정렬 조건",
            "additionalProperties": {
              "type": "string",
              "enum": ["asc", "desc"]
            },
            "example": {
              "bizName": "desc",
              "dlvrReqRcptDate": "desc"
            }
          },
          "page": {
            "type": "integer",
            "minimum": 1,
            "default": 1,
            "description": "페이지 번호"
          },
          "size": {
            "type": "integer",
            "minimum": 1,
            "maximum": 100,
            "default": 50,
            "description": "페이지 크기"
          }
        },
        "required": ["page", "size"]
      },
      "ProcurementItem": {
        "type": "object",
        "description": "납품요구 데이터 항목 (엑셀 스펙 준수)",
        "properties": {
          "exclcProdctYn": {"type": "string", "enum": ["Y", "N"], "description": "우수제품여부", "example": "Y"},
          "dlvrReqRcptDate": {"type": "string", "format": "date", "description": "납품요구접수일자", "example": "2025-06-23"},
          "dminsttNm": {"type": "string", "description": "수요기관명", "example": "서울특별시"},
          "dminsttRgnNm": {"type": "string", "description": "수요기관지역명", "example": "서울"},
          "corpNm": {"type": "string", "description": "계약업체명", "example": "삼성전자"},
          "dlvrReqNm": {"type": "string", "description": "사업명", "example": "컴퓨터 납품"},
          "prdctClsfcNoNm": {"type": "string", "description": "품명", "example": "컴퓨터"},
          "dtilPrdctClsfcNoNm": {"type": "string", "description": "세부품명", "example": "노트북컴퓨터"},
          "prdctIdntNo": {"type": "string", "description": "물품식별번호", "example": "COMP001"},
          "prdctIdntNoNm": {"type": "string", "description": "품목", "example": "노트북"},
          "incdecQty": {"type": "integer", "description": "증감수량", "example": 10},
          "prdctUprc": {"type": "number", "description": "물품단가", "example": 500000},
          "incdecAmt": {"type": "number", "description": "증감금액", "example": 5000000},
          "dminsttCd": {"type": "string", "description": "수요기관코드", "example": "ORG001"}
        }
      },
      "ProcurementListResponse": {
        "type": "object",
        "description": "납품요구 데이터 조회 응답 (엑셀 스펙 준수)",
        "properties": {
          "success": {"type": "boolean", "example": true},
          "message": {"type": "string", "example": "조달청 데이터 조회 성공"},
          "data": {
            "type": "object",
            "properties": {
              "page": {"type": "integer", "description": "현재 페이지 번호", "example": 1},
              "pageSize": {"type": "integer", "description": "페이지당 데이터 수", "example": 50},
              "total": {"type": "integer", "description": "전체 건수", "example": 992},
              "totalAmount": {"type": "number", "description": "전체 금액", "example": 50000000},
              "jodalTotalAmount": {"type": "number", "description": "조달 총 금액", "example": 456789123.45},
              "masTotalAmount": {"type": "number", "description": "마스 총 금액", "example": 5780440150.55},
              "items": {
                "type": "array",
                "description": "데이터 목록",
                "items": {"$ref": "#/components/schemas/ProcurementItem"}
              },
              "prdctClsfcNoNms": {
                    "type": "array",
                    "description": "품명 필터 옵션",
                    "items": {"type": "string"},
                    "example": ["컴퓨터", "사무용품", "기계장비"]
                  },
              "dminsttNms": {
                    "type": "array",
                    "description": "수요기관명 필터 옵션",
                    "items": {"type": "string"},
                    "example": ["서울특별시", "부산광역시", "대구광역시"]
                  },
              "corpNms": {
                    "type": "array",
                "description": "계약업체명 필터 옵션",
                    "items": {"type": "string"},
                    "example": ["삼성전자", "LG전자", "SK하이닉스"]
              }
            }
          },
          "timestamp": {"type": "string", "format": "date-time", "example": "2025-06-23T10:30:00+00:00"}
        }
      },
      "StatisticsResponse": {
        "type": "object",
        "properties": {
          "success": {"type": "boolean", "example": true},
          "message": {"type": "string", "example": "통계 조회 성공"},
          "data": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {"type": "string"},
                "delivery_count": {"type": "integer"},
                "total_amount": {"type": "number"},
                "avg_amount": {"type": "number"}
              }
            }
          },
          "timestamp": {"type": "string", "format": "date-time"}
        }
      },
      "FilterOptionsResponse": {
        "type": "object",
        "properties": {
          "success": {"type": "boolean", "example": true},
          "message": {"type": "string", "example": "필터 옵션 조회 성공"},
          "data": {
            "type": "object",
            "properties": {
              "filterPrdctClsfcNoNm": {
                "type": "array",
                "items": {"type": "string"}
              },
              "filterDminsttNm": {
                "type": "array",
                "items": {"type": "string"}
              },
              "filterCorpNm": {
                "type": "array",
                "items": {"type": "string"}
              }
            }
          },
          "timestamp": {"type": "string", "format": "date-time"}
        }
      },
             "InstitutionStatisticsResponse": {
         "type": "object",
         "properties": {
           "success": {"type": "boolean", "example": true},
           "message": {"type": "string", "example": "수요기관별 통계 조회 성공"},
           "data": {
             "type": "object",
             "properties": {
               "page": {"type": "integer", "description": "페이지 번호", "example": 1},
               "size": {"type": "integer", "description": "페이지 크기", "example": 10},
               "total": {"type": "integer", "description": "전체 데이터 수", "example": 147},
               "year": {"type": "integer", "description": "기준 연도", "example": 2025},
               "totalInstitutions": {"type": "integer", "description": "전체 수요기관 수", "example": 147},
               "totalAmount": {"type": "number", "description": "전체 증감금액 합산", "example": 6237229274},
               "prevYearAmount": {"type": "number", "description": "전년 실적", "example": 0},
               "growthRate": {"type": "number", "description": "전년 대비 증감률(%)", "example": 0},
               "institutions": {
                 "type": "array",
                 "items": {
                   "type": "object",
                   "properties": {
                     "dminsttNm": {"type": "string", "description": "수요기관명", "example": "서울특별시"},
                     "dminsttRgnNm": {"type": "string", "description": "수요기관지역", "example": "서울"},
                     "dminsttCd": {"type": "string", "description": "수요기관코드", "example": "ORG001"},
                     "currentAmount": {"type": "number", "description": "당해년도 증감금액", "example": 5000000000},
                     "prevAmount": {"type": "number", "description": "전년도 증감금액", "example": 4500000000},
                     "growthRate": {"type": "number", "description": "증감률(%)", "example": 11.11},
                     "deliveryCount": {"type": "integer", "description": "납품 건수", "example": 150},
                     "exclcProdctAmount": {"type": "number", "description": "우수제품 금액", "example": 3000000000},
                     "generalProdctAmount": {"type": "number", "description": "일반제품 금액", "example": 2000000000},
                     "exclcProdctYn": {"type": "string", "description": "주요 제품 유형", "example": "Y"}
                   }
                 }
               },
               "appliedFilters": {
                 "type": "object",
                 "description": "현재 적용된 필터 정보 (값이 있을 때만 표시)",
                 "properties": {
                   "year": {"type": "integer", "example": 2025},
                   "dminsttNm": {"type": "string", "example": "서울특별시"},
                   "dminsttRgnNm": {"type": "string", "example": "서울"},
                   "exclcProdctYn": {"type": "string", "example": "Y"},
                   "corpNm": {"type": "string", "example": "삼성전자"},
                   "prdctClsfcNoNm": {"type": "string", "example": "컴퓨터"}
                 }
               }
             }
           },
           "timestamp": {"type": "string", "format": "date-time", "example": "2025-06-24T10:30:00+00:00"}
         }
      },
      "UserProfile": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 1
          },
          "username": {
            "type": "string",
            "example": "admin"
          },
          "email": {
            "type": "string",
            "example": "admin@rejintech.com"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-01T00:00:00Z"
          }
        }
      },
      "DeliveryRequestItem": {
        "type": "object",
        "properties": {
          "dlvrReqNo": {
            "type": "string",
            "description": "납품요구번호"
          },
          "dlvrReqDate": {
            "type": "string",
            "format": "date",
            "description": "납품요구일자"
          },
          "dlvrReqRcptDate": {
            "type": "string",
            "format": "date",
            "description": "납품요구접수일자"
          },
          "dlvrTmlmtDate": {
            "type": "string",
            "format": "date",
            "description": "납품기한일자"
          },
          "dlvrReqNm": {
            "type": "string",
            "description": "납품요구명"
          },
          "dminsttNm": {
            "type": "string",
            "description": "수요기관명"
          },
          "dminsttRgnNm": {
            "type": "string",
            "description": "수요기관지역명"
          },
          "corpNm": {
            "type": "string",
            "description": "계약업체명"
          },
          "cntrctNo": {
            "type": "string",
            "description": "계약번호"
          },
          "total_amount": {
            "type": "number",
            "format": "float",
            "description": "총금액"
          },
          "total_quantity": {
            "type": "number",
            "format": "float",
            "description": "총수량"
          },
          "exclcProdctYn": {
            "type": "string",
            "description": "우수제품여부 (Y/N)"
          },
          "type": {
            "type": "string",
            "description": "구분 (CSO/MAS)"
          }
        }
      },
      "DeliveryRequestList": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "example": 1
          },
          "size": {
            "type": "integer",
            "example": 50
          },
          "total": {
            "type": "integer",
            "example": 7029
          },
          "jodalTotalAmount": {
            "type": "number",
            "format": "float",
            "description": "필터링된 '조달' 금액 합계"
          },
          "masTotalAmount": {
            "type": "number",
            "format": "float",
            "description": "필터링된 '마스' 금액 합계"
          },
          "totalAmount": {
            "type": "number",
            "format": "float",
            "description": "필터링된 전체 금액 합계"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DeliveryRequestItem"
            }
          }
        }
       }
    }
  },
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "paths": {
    "/api/test": {
      "get": {
        "tags": ["테스트"],
        "summary": "API 연결 테스트",
        "description": "API 서버 연결 상태를 확인합니다",
        "responses": {
          "200": {
            "description": "성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "success"
                    },
                    "message": {
                      "type": "string",
                      "example": "API 서버가 정상적으로 작동중입니다"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2024-01-01T12:00:00Z"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "tags": ["인증"],
        "summary": "사용자 로그인",
        "description": "사용자명과 패스워드로 로그인하여 JWT 토큰을 발급받습니다.\n\n### 참고사항\n- 토큰은 24시간 동안 유효합니다.\n- 동시에 최대 5개의 토큰이 발급될 수 있습니다.\n- 이전 토큰은 계속 유효합니다.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["username", "password"],
                "properties": {
                  "username": {
                    "type": "string",
                    "example": "admin",
                    "description": "사용자명"
                  },
                  "password": {
                    "type": "string",
                    "example": "password123",
                    "description": "패스워드"
                  }
                }
              },
              "example": {
                "username": "admin",
                "password": "password123"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "로그인 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "로그인 성공"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "token": {
                          "type": "string",
                          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                        },
                        "user": {
                          "type": "object",
                          "properties": {
                            "id": {
                              "type": "integer",
                              "example": 1
                            },
                            "username": {
                              "type": "string",
                              "example": "admin"
                            },
                            "email": {
                              "type": "string",
                              "example": "admin@rejintech.com"
                            },
                            "last_login": {
                              "type": "string",
                              "format": "date-time",
                              "example": "2024-01-02T09:30:00+09:00"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "잘못된 사용자명 또는 패스워드입니다."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/verify": {
      "get": {
        "tags": ["인증"],
        "summary": "토큰 검증",
        "description": "JWT 토큰의 유효성을 검증합니다",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "토큰 유효",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "user_id": {
                          "type": "integer",
                          "example": 1
                        },
                        "username": {
                          "type": "string",
                          "example": "admin"
                        },
                        "email": {
                          "type": "string",
                          "example": "admin@example.com"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "토큰이 유효합니다."
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "토큰 무효",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "유효하지 않은 토큰입니다."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/profile": {
      "get": {
        "tags": ["인증"],
        "summary": "사용자 프로필 조회",
        "description": "JWT 토큰을 사용하여 현재 로그인한 사용자의 프로필을 조회합니다",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "프로필 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "401": {
            "description": "인증 실패",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/check-login": {
      "post": {
        "tags": ["인증"],
        "summary": "로그인 상태 확인",
        "description": "현재 토큰이 데이터베이스에 저장된 유효한 토큰인지 확인합니다",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "토큰 유효 (로그인 상태)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "is_logged_in": {
                      "type": "boolean",
                      "example": true
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "integer",
                          "example": 1
                        },
                        "username": {
                          "type": "string",
                          "example": "admin"
                        },
                        "email": {
                          "type": "string",
                          "example": "admin@example.com"
                        }
                      }
                    },
                    "token_info": {
                      "type": "object",
                      "properties": {
                        "issued_at": {
                          "type": "string",
                          "example": "2025-06-23 07:00:00"
                        },
                        "expires_at": {
                          "type": "string",
                          "example": "2025-06-23 08:00:00"
                        },
                        "last_used_at": {
                          "type": "string",
                          "example": "2025-06-23 07:30:00"
                        },
                        "ip_address": {
                          "type": "string",
                          "example": "192.168.1.100"
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "로그인 상태 확인됨"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "토큰 무효 (로그아웃 상태)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "is_logged_in": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "유효하지 않은 토큰입니다."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "tags": ["인증"],
        "summary": "로그아웃",
        "description": "현재 토큰을 무효화하여 로그아웃 처리합니다",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "logout_all": {
                    "type": "boolean",
                    "example": false,
                    "description": "모든 디바이스에서 로그아웃할지 여부"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "로그아웃 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "로그아웃 완료"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "유효하지 않은 토큰입니다."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/change-password": {
      "post": {
        "tags": ["인증"],
        "summary": "비밀번호 변경",
        "description": "현재 로그인된 사용자의 비밀번호를 변경합니다",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["current_password", "new_password", "confirm_password"],
                "properties": {
                  "current_password": {
                    "type": "string",
                    "example": "admin123",
                    "description": "현재 비밀번호"
                  },
                  "new_password": {
                    "type": "string",
                    "example": "newPassword123!",
                    "description": "새 비밀번호 (최소 8자, 영문+숫자+특수문자 포함)"
                  },
                  "confirm_password": {
                    "type": "string",
                    "example": "newPassword123!",
                    "description": "새 비밀번호 확인"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "비밀번호 변경 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "비밀번호가 성공적으로 변경되었습니다."
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "example": "2025-06-24T12:00:00+00:00"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "모든 필드를 입력해주세요."
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "현재 비밀번호가 일치하지 않습니다."
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "비밀번호 정책 위반",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "새 비밀번호는 최소 8자 이상이어야 하며, 영문, 숫자, 특수문자를 포함해야 합니다."
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "서버 오류",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "서버 오류가 발생했습니다."
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login-logs": {
      "get": {
        "tags": ["인증"],
        "summary": "로그인 로그 조회",
        "description": "현재 사용자의 로그인 이력을 조회합니다",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "페이지 번호",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "minimum": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "페이지당 항목 수",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "minimum": 1,
              "maximum": 100
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "로그인 상태 필터",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["success", "failed"],
              "example": "success"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "로그인 로그 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer",
                            "example": 1
                          },
                          "user_id": {
                            "type": "integer",
                            "example": 1
                          },
                          "username": {
                            "type": "string",
                            "example": "admin"
                          },
                          "ip_address": {
                            "type": "string",
                            "example": "192.168.1.100"
                          },
                          "user_agent": {
                            "type": "string",
                            "example": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
                          },
                          "status": {
                            "type": "string",
                            "enum": ["success", "failed"],
                            "example": "success"
                          },
                          "attempt_time": {
                            "type": "string",
                            "format": "date-time",
                            "example": "2025-06-24T12:00:00+00:00"
                          },
                          "failure_reason": {
                            "type": "string",
                            "nullable": true,
                            "example": null
                          }
                        }
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "current_page": {
                          "type": "integer",
                          "example": 1
                        },
                        "per_page": {
                          "type": "integer",
                          "example": 20
                        },
                        "total": {
                          "type": "integer",
                          "example": 45
                        },
                        "total_pages": {
                          "type": "integer",
                          "example": 3
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "유효하지 않은 토큰입니다."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login-statistics": {
      "get": {
        "tags": ["인증"],
        "summary": "로그인 통계 조회",
        "description": "현재 사용자의 로그인 통계를 조회합니다",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "period",
            "in": "query",
            "description": "통계 기간",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["7days", "30days", "90days"],
              "default": "30days"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "로그인 통계 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "period": {
                          "type": "string",
                          "example": "30days"
                        },
                        "total_attempts": {
                          "type": "integer",
                          "example": 45
                        },
                        "successful_logins": {
                          "type": "integer",
                          "example": 42
                        },
                        "failed_attempts": {
                          "type": "integer",
                          "example": 3
                        },
                        "success_rate": {
                          "type": "number",
                          "format": "float",
                          "example": 93.33
                        },
                        "most_recent_login": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2025-06-24T12:00:00+00:00"
                        },
                        "most_frequent_ip": {
                          "type": "string",
                          "example": "192.168.1.100"
                        },
                        "daily_breakdown": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "date": {
                                "type": "string",
                                "format": "date",
                                "example": "2025-06-24"
                              },
                              "successful": {
                                "type": "integer",
                                "example": 3
                              },
                              "failed": {
                                "type": "integer",
                                "example": 0
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "유효하지 않은 토큰입니다."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/procurement/delivery-requests": {
      "get": {
        "tags": [
          "조달 데이터"
        ],
        "summary": "납품 요구 데이터 리스트 조회",
        "description": "납품요구 목록을 조회합니다.",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": true,
            "description": "페이지 번호",
            "schema": {
              "type": "integer",
              "minimum": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "required": true,
            "description": "페이지당 데이터 수",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100
            }
          },
          {
            "name": "startDate",
            "in": "query",
            "required": false,
            "description": "납품요구접수일자 시작일 (YYYY-MM-DD)",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "endDate",
            "in": "query",
            "required": false,
            "description": "납품요구접수일자 종료일 (YYYY-MM-DD)",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "exclcProdctYn",
            "in": "query",
            "required": false,
            "description": "구분(조달/마스/전체)",
            "schema": {
              "type": "string",
              "enum": ["Y", "N"]
            }
          },
          {
            "name": "prdctClsfcNoNm",
            "in": "query",
            "description": "품명 (최대 100자)",
            "schema": {
              "type": "string",
              "maxLength": 100
            }
          },
          {
            "name": "dtilPrdctClsfcNoNm",
            "in": "query",
            "description": "세부품명 (최대 100자)",
            "schema": {
              "type": "string",
              "maxLength": 100
            }
          },
          {
            "name": "dminsttRgnNm",
            "in": "query",
            "description": "수요기관지역 (유효한 행정구역명)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "dminsttNm",
            "in": "query",
            "description": "수요기관 (최대 100자)",
            "schema": {
              "type": "string",
              "maxLength": 100
            }
          },
          {
            "name": "corpNm",
            "in": "query",
            "description": "계약업체 (최대 100자)",
            "schema": {
              "type": "string",
              "maxLength": 100
            }
          },
          {
            "name": "sortBy",
            "in": "query",
            "description": "정렬 기준 필드",
            "schema": {
              "type": "string",
              "default": "dlvrReqRcptDate"
            }
          },
          {
            "name": "sortOrder",
            "in": "query",
            "description": "정렬 순서",
            "schema": {
              "type": "string",
              "enum": ["asc", "desc"],
              "default": "desc"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "totalAmount": {
                          "type": "number",
                          "description": "모든 납품요구의 total_amount 합계"
                        },
                        "jodalTotalAmount": {
                          "type": "number",
                          "description": "우수제품(is_excellent_product=1) 납품요구의 total_amount 합계"
                        },
                        "masTotalAmount": {
                          "type": "number",
                          "description": "일반제품(is_excellent_product=0) 납품요구의 total_amount 합계"
                        },
                        "items": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/DeliveryRequestItem"
                          }
                        },
                        "totalCount": {
                          "type": "integer",
                          "description": "전체 데이터 수"
                        },
                        "currentPage": {
                          "type": "integer",
                          "description": "현재 페이지 번호"
                        },
                        "totalPages": {
                          "type": "integer",
                          "description": "전체 페이지 수"
                        }
                      }
                    }
                  }
                },
                "example": {
                  "success": true,
                  "data": {
                    "totalAmount": 1000000000,
                    "jodalTotalAmount": 600000000,
                    "masTotalAmount": 400000000,
                    "items": [
                      {
                        "dlvrReqNo": "DLV123456",
                        "dlvrReqRcptDate": "2024-01-01",
                        "prdctClsfcNoNm": "영상감시장치",
                        "dtilPrdctClsfcNoNm": "CCTV",
                        "dminsttRgnNm": "경기도",
                        "dminsttNm": "수원시청",
                        "corpNm": "(주)지인테크",
                        "totalAmount": 50000000,
                        "isExcellentProduct": 1
                      }
                    ],
                    "totalCount": 215,
                    "currentPage": 1,
                    "totalPages": 11
                  }
                }
              }
            }
          },
          "400": {
            "description": "잘못된 요청",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string"
                    },
                    "errors": {
                      "type": "object",
                      "additionalProperties": {
                        "type": "string"
                      }
                    }
                  }
                },
                "example": {
                  "success": false,
                  "message": "잘못된 요청입니다.",
                  "errors": {
                    "startDate": "시작일이 종료일보다 늦을 수 없습니다.",
                    "pageSize": "페이지당 데이터 수는 1에서 100 사이여야 합니다."
                  }
                }
              }
            }
          },
          "401": {
            "description": "인증 실패",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "유효하지 않은 토큰입니다."
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "요청 제한 초과",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "요청 횟수가 제한을 초과했습니다. 잠시 후 다시 시도해주세요."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/procurement/statistics/institutions": {
      "get": {
        "tags": ["조달 데이터"],
        "summary": "기관별 통계 조회",
        "description": "수요기관별 납품요구 통계를 조회합니다.\n\n### 통계 정보\n- 기관별 납품요구 건수\n- 기관별 총 납품요구 금액\n- 기관별 평균 납품요구 금액\n- 기관별 최대/최소 납품요구 금액",
        "parameters": [
          {
            "name": "startDate",
            "in": "query",
            "description": "시작일자 (YYYY-MM-DD)",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "endDate",
            "in": "query",
            "description": "종료일자 (YYYY-MM-DD)",
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "region",
            "in": "query",
            "description": "지역명",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "통계 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "기관별 통계 조회 성공"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "institution_name": {
                            "type": "string",
                            "example": "서울특별시청"
                          },
                          "region": {
                            "type": "string",
                            "example": "서울"
                          },
                          "delivery_count": {
                            "type": "integer",
                            "example": 150
                          },
                          "total_amount": {
                            "type": "number",
                            "example": 1234567890
                          },
                          "avg_amount": {
                            "type": "number",
                            "example": 8230452.6
                          },
                          "max_amount": {
                            "type": "number",
                            "example": 50000000
                          },
                          "min_amount": {
                            "type": "number",
                            "example": 1000000
                          }
                        }
                      }
                    },
                    "summary": {
                      "type": "object",
                      "properties": {
                        "total_institutions": {
                          "type": "integer",
                          "example": 50
                        },
                        "total_delivery_count": {
                          "type": "integer",
                          "example": 1500
                        },
                        "total_amount": {
                          "type": "number",
                          "example": 12345678900
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/procurement/statistics/companies": {
      "get": {
        "tags": ["조달청"],
        "summary": "업체별 통계 조회",
        "description": "업체별 납품요구 통계를 조회합니다",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "통계 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatisticsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/procurement/statistics/products": {
      "get": {
        "tags": ["조달청"],
        "summary": "품목별 통계 조회",
        "description": "품목별 납품요구 통계를 조회합니다",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "통계 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StatisticsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/procurement/filter-options": {
      "get": {
        "tags": ["조달청"],
        "summary": "필터 옵션 조회",
        "description": "필터링에 사용할 수 있는 옵션들을 조회합니다",
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "필터 옵션 조회 성공",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FilterOptionsResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "테스트",
      "description": "API 테스트 관련 엔드포인트"
    },
    {
      "name": "인증",
      "description": "JWT 기반 사용자 인증 관련 엔드포인트"
    },
    {
      "name": "사용자",
      "description": "사용자 관리 관련 엔드포인트"
    },
    {
      "name": "조달청",
      "description": "조달청 납품요구 데이터 조회 및 통계 관련 엔드포인트"
    }
  ]
} 