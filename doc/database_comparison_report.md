# ğŸ” ë°ì´í„°ë² ì´ìŠ¤ ë¹„êµ ë³´ê³ ì„œ

## ğŸ“‹ ë¹„êµ ê°œìš”

**ë¹„êµ ì¼ì‹œ**: 2025ë…„ 6ì›” 28ì¼  
**ë¹„êµ ëŒ€ìƒ**: ë¡œì»¬ í™˜ê²½ vs AWS ì„œë²„ (52.78.104.83)  
**ë°ì´í„°ë² ì´ìŠ¤**: jintech (MariaDB)  

## ğŸ“Š í…Œì´ë¸” êµ¬ì¡° ë¹„êµ ê²°ê³¼

### âœ… í…Œì´ë¸” ëª©ë¡ ì¼ì¹˜
- **ë¡œì»¬ í…Œì´ë¸” ìˆ˜**: 14ê°œ
- **ì„œë²„ í…Œì´ë¸” ìˆ˜**: 14ê°œ
- **ê³µí†µ í…Œì´ë¸”**: 14ê°œ (100% ì¼ì¹˜)

#### ê³µí†µ í…Œì´ë¸” ëª©ë¡
1. `api_call_history` - API í˜¸ì¶œ ê¸°ë¡
2. `batch_logs` - ë°°ì¹˜ ì‘ì—… ë¡œê·¸
3. `companies` - ì—…ì²´ ì •ë³´
4. `contracts` - ê³„ì•½ ì •ë³´
5. `delivery_request_details` - ë‚©í’ˆ ìš”êµ¬ ìƒì„¸
6. `delivery_request_items` - ë‚©í’ˆ ìš”êµ¬ í’ˆëª©
7. `delivery_requests` - ë‚©í’ˆ ìš”êµ¬
8. `filtering_companies` - í•„í„°ë§ ì—…ì²´
9. `institutions` - ê¸°ê´€ ì •ë³´
10. `login_logs` - ë¡œê·¸ì¸ ê¸°ë¡
11. `product_categories` - ì œí’ˆ ì¹´í…Œê³ ë¦¬
12. `products` - ì œí’ˆ ì •ë³´
13. `user_tokens` - ì‚¬ìš©ì í† í°
14. `users` - ì‚¬ìš©ì ì •ë³´

## ğŸ“ˆ ë°ì´í„° ìˆ˜ëŸ‰ ë¹„êµ

| í…Œì´ë¸”ëª… | ë¡œì»¬ | ì„œë²„ | ì°¨ì´ | ìƒíƒœ |
|---------|------|------|------|------|
| **api_call_history** | 1,859 | 1,375 | +484 | ğŸŸ¡ ë¡œì»¬ì´ ë§ìŒ |
| **batch_logs** | 51 | 51 | 0 | âœ… ë™ì¼ |
| **companies** | 66 | 0 | +66 | ğŸ”´ ì„œë²„ ë°ì´í„° ì—†ìŒ |
| **contracts** | 119 | 0 | +119 | ğŸ”´ ì„œë²„ ë°ì´í„° ì—†ìŒ |
| **delivery_request_details** | 1,026 | 1,026 | 0 | âœ… ë™ì¼ |
| **delivery_request_items** | 947 | 0 | +947 | ğŸ”´ ì„œë²„ ë°ì´í„° ì—†ìŒ |
| **delivery_requests** | 215 | 0 | +215 | ğŸ”´ ì„œë²„ ë°ì´í„° ì—†ìŒ |
| **filtering_companies** | 471 | 471 | 0 | âœ… ë™ì¼ |
| **institutions** | 100 | 0 | +100 | ğŸ”´ ì„œë²„ ë°ì´í„° ì—†ìŒ |
| **login_logs** | 65 | 60 | +5 | ğŸŸ¡ ë¡œì»¬ì´ ì•½ê°„ ë§ìŒ |
| **product_categories** | 92 | 0 | +92 | ğŸ”´ ì„œë²„ ë°ì´í„° ì—†ìŒ |
| **products** | 622 | 0 | +622 | ğŸ”´ ì„œë²„ ë°ì´í„° ì—†ìŒ |
| **user_tokens** | 49 | 43 | +6 | ğŸŸ¡ ë¡œì»¬ì´ ì•½ê°„ ë§ìŒ |
| **users** | 2 | 2 | 0 | âœ… ë™ì¼ |

## ğŸ”§ êµ¬ì¡°ì  ì°¨ì´ì 

### ğŸ“‹ delivery_requests í…Œì´ë¸”
**ì°¨ì´ì **: `delivery_request_date` ì»¬ëŸ¼ì˜ ì¸ë±ìŠ¤ ì„¤ì • ì°¨ì´
- **ë¡œì»¬**: MUL (Multiple) ì¸ë±ìŠ¤ ì„¤ì •ë¨
- **ì„œë²„**: ì¸ë±ìŠ¤ ì—†ìŒ

#### ë¡œì»¬ ì¸ë±ìŠ¤ êµ¬ì¡°
```
- PRIMARY: id
- UNIQUE: delivery_request_number, delivery_request_change_order  
- INDEX: contract_id, institution_id, company_id
- INDEX: delivery_request_date (ì„±ëŠ¥ ìµœì í™”ìš©)
- COMPOSITE: delivery_request_date + is_excellent_product
```

## ğŸš¨ ì£¼ìš” ë°œê²¬ì‚¬í•­

### 1. ì„œë²„ ë°ì´í„° ë¶€ì¡± ë¬¸ì œ
**ì‹¬ê°ë„**: ğŸ”´ ë†’ìŒ
- **í•µì‹¬ í…Œì´ë¸”ë“¤ì— ë°ì´í„°ê°€ ì—†ìŒ**:
  - `companies` (66ê°œ â†’ 0ê°œ)
  - `contracts` (119ê°œ â†’ 0ê°œ) 
  - `delivery_requests` (215ê°œ â†’ 0ê°œ)
  - `delivery_request_items` (947ê°œ â†’ 0ê°œ)
  - `institutions` (100ê°œ â†’ 0ê°œ)
  - `product_categories` (92ê°œ â†’ 0ê°œ)
  - `products` (622ê°œ â†’ 0ê°œ)

### 2. ì •ìƒ ë™ê¸°í™”ëœ í…Œì´ë¸”
**ìƒíƒœ**: âœ… ì–‘í˜¸
- `batch_logs`: ì™„ì „ ë™ì¼ (51ê°œ)
- `delivery_request_details`: ì™„ì „ ë™ì¼ (1,026ê°œ)
- `filtering_companies`: ì™„ì „ ë™ì¼ (471ê°œ)
- `users`: ì™„ì „ ë™ì¼ (2ê°œ)

### 3. í™œë™ ë¡œê·¸ ì°¨ì´
**ìƒíƒœ**: ğŸŸ¡ ê²½ë¯¸
- `api_call_history`: ë¡œì»¬ì´ 484ê°œ ë” ë§ìŒ (ìµœê·¼ í…ŒìŠ¤íŠ¸ë¡œ ì¸í•¨)
- `login_logs`: ë¡œì»¬ì´ 5ê°œ ë” ë§ìŒ
- `user_tokens`: ë¡œì»¬ì´ 6ê°œ ë” ë§ìŒ

## ğŸ“ ê¶Œì¥ ì¡°ì¹˜ì‚¬í•­

### ğŸ”¥ ì¦‰ì‹œ ì¡°ì¹˜ í•„ìš”
1. **ì„œë²„ ë°ì´í„° ë™ê¸°í™” ì‹¤í–‰**
   ```bash
   # ì„œë²„ì—ì„œ ë°°ì¹˜ ì‘ì—… ìˆ˜ë™ ì‹¤í–‰
   docker exec rejintech-workspace php /var/www/html/application/controllers/batch/data_normalization.php
   ```

2. **í•µì‹¬ ë°ì´í„° í…Œì´ë¸” ë³µêµ¬**
   - companies (ì—…ì²´ ì •ë³´)
   - institutions (ê¸°ê´€ ì •ë³´)  
   - product_categories & products (ì œí’ˆ ì •ë³´)
   - contracts (ê³„ì•½ ì •ë³´)
   - delivery_requests & items (ë‚©í’ˆ ìš”êµ¬)

### ğŸ”§ ì„±ëŠ¥ ìµœì í™”
1. **ì„œë²„ ì¸ë±ìŠ¤ ì¶”ê°€**
   ```sql
   -- delivery_requests í…Œì´ë¸” ì„±ëŠ¥ ê°œì„ 
   ALTER TABLE delivery_requests ADD INDEX idx_delivery_date (delivery_request_date);
   ALTER TABLE delivery_requests ADD INDEX idx_date_excellent (delivery_request_date, is_excellent_product);
   ```

### ğŸ“Š ëª¨ë‹ˆí„°ë§ ê°•í™”
1. **ë°°ì¹˜ ì‘ì—… ìƒíƒœ ì ê²€**
   - ë§¤ì¼ ìƒˆë²½ 1ì‹œ ë°°ì¹˜ ì‘ì—… ì •ìƒ ì‹¤í–‰ ì—¬ë¶€ í™•ì¸
   - ë°ì´í„° ë™ê¸°í™” ì‹¤íŒ¨ ì‹œ ì¦‰ì‹œ ì•Œë¦¼ ì„¤ì •

2. **ë°ì´í„° ì¼ê´€ì„± ì ê²€**
   - ì£¼ê°„ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡° ë¹„êµ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
   - ë°ì´í„° ìˆ˜ëŸ‰ ì°¨ì´ ëª¨ë‹ˆí„°ë§

## ğŸ¯ ê²°ë¡ 

### ê¸´ê¸‰ ìƒí™©
ğŸš¨ **ì„œë²„ì˜ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„°ê°€ ëˆ„ë½ë˜ì–´ ìˆì–´ ì¦‰ì‹œ ë³µêµ¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.**

### ì›ì¸ ë¶„ì„
- ë°°ì¹˜ ì‘ì—…ì´ ì •ìƒ ì‹¤í–‰ë˜ì§€ ì•Šì•˜ê±°ë‚˜
- ë°ì´í„° ë™ê¸°í™” ê³¼ì •ì—ì„œ ì˜¤ë¥˜ ë°œìƒ
- ì„œë²„ ë°°í¬ í›„ ì´ˆê¸° ë°ì´í„° ì„¤ì • ëˆ„ë½

### ë³µêµ¬ ìš°ì„ ìˆœìœ„
1. **1ìˆœìœ„**: companies, institutions (ê¸°ì¤€ ë°ì´í„°)
2. **2ìˆœìœ„**: product_categories, products (ì œí’ˆ ì •ë³´)
3. **3ìˆœìœ„**: contracts, delivery_requests (ê±°ë˜ ë°ì´í„°)

---
**ë‹¤ìŒ ë‹¨ê³„**: ì„œë²„ ë°ì´í„° ë™ê¸°í™” ë° ë°°ì¹˜ ì‘ì—… ì ê²€ í•„ìš” 